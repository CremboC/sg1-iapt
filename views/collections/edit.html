{{extend 'layout.html'}}

<div class="container">
{{if form.errors:}}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <strong>Your submitted form contains the following errors</strong>
        <ul>
        {{for fieldname in form.errors:}}
            <li>{{=fieldname}} error: {{=form.errors[fieldname]}}</li>
        {{pass}}
        </ul>
    </div>
{{form.errors.clear()}}
{{pass}}

{{=form.custom.begin}}
    <div class="row">
        <div class="col-xs-10">
            <h3>Editing Collection <strong>{{=collection.name}}</strong></h3>
        </div>
        <div class="col-xs-2">
            <button type="submit" name="submit" value="delete" class="btn btn-danger btn-block"
                    onclick="return confirm('Are you sure you want to delete this collection?')">Delete</button>
        </div>
    </div>

    <div class="form-group">
        <label for="collections_name">{{=form.custom.label.name}}</label>
        <input class="form-control string" id="collections_name" name="name" type="text"
               value="Collection One">
    </div>

    <div class="form-group">
        <label for="collections_private">
        {{if collection.private:}}
            <input class="boolean" id="collections_private" name="private" type="checkbox" value="on"
                   checked="checked">
        {{else:}}
            <input class="boolean" id="collections_private" name="private" type="checkbox" value="on">
        {{pass}}
        {{=form.custom.label.private}}
        </label>
    </div>

    <div class="form-group">
        <label for="new_objects">Select items to add</label>
        <br>
        <select id="new_objects" multiple="multiple" name="new_objects">
        {{for obj in objects:}}
            <option value="{{=obj.id}}">{{=obj.name}}</option>
        {{pass}}
        </select>
    </div>

    <h3>Items in Collection</h3>

    <div class="panel panel-default">
        <div class="panel-body">
        {{print_sortby()}}
            <div class="row">
            {{for object in objects_in_collection:}}
                <div class="col-xs-4" id="object-{{=object.id}}">
                    <div class="clearfix">
                        <a href="#remove" class="remove pull-right" data-id="{{=object.id}}">
                            <span class="glyphicon glyphicon-remove middle"></span>
                        </a>
                    </div>
                {{print_object(object, False)}}
                </div>
            {{pass}}
            </div>
        </div>
    </div>

    <div class="form-group clearfix">
        <a href="{{=URL('collections', 'show', args=collection.id)}}" class="btn btn-default pull-left">Cancel</a>
        <button type="submit" name="submit" value="save" class="btn btn-success pull-right">Save Collection</button>
    </div>

    <div class="modal fade" id="add-item">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Add Items to Collection</h4>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


{{=form.custom.end}}
</div>

<div class="undo">
    <div class="container">
        <div class="row">
            <div class="col-xs-10">
                To undo removing an item, press undo.
            </div>
            <div class="col-xs-2">
                <a class="btn btn-warning">Undo</a>
            </div>
        </div>
    </div>
</div>

<script src="{{=URL('static','js/collection.js')}}"></script>