{{breadcrumbs = [[URL('default', 'index'), 'Home'], [URL('collections', 'index'), 'My collections'], ['Edit collection']]}}

{{extend 'layout.html'}}

<script>
    // Adds accessibility features to widgets generated by web2py
    $(document).ready(function(){
        var input = $("#collections_name");
        input.prop('required',true);
        input.attr('placeholder', 'Collection\'s name');
        $("#collections_private").attr('placeholder', 'set collection to private');
    });
</script>

<div class="container">
{{if form.errors:}}
    <div class="alert alert-warning" role="alert">
        <button type="button" class="close" data-dismiss="alert">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close Alert</span>
        </button>
        <strong>Your submitted form contains the following errors:</strong>
        <ul>
        {{for fieldname in form.errors:}}
            <li>{{=fieldname}} error: {{=form.errors[fieldname]}}</li>
        {{pass}}
        </ul>
    </div>
{{form.errors.clear()}}
{{pass}}

<!-- See js script at top of page for accessibility implementation-->
{{=form.custom.begin}}
    <div class="row">
        <div class="col-xs-10">
            <h3>Editing Collection <strong>{{=collection.name}}</strong></h3>
        </div>
        <div class="col-xs-2">
        {{if not is_unfiled:}}
            <button type="submit" name="delete_this_record" value="yes" class="btn btn-danger btn-block" aria-haspopup="true"
                    onclick="return confirm('Are you sure you want to delete this collection? \n You won\'t lose your items, they\'ll be moved to your Unfiled collection.')">Delete collection
            </button>
        {{pass}}
        </div>
    </div>

    <em class="text-info">
        Fields marked with an asterisk (*) are mandatory.
    </em>

    <div class="form-group">
        <label for="collections_name" class="mandatory">{{=form.custom.label.name}}</label>
    {{=form.custom.widget.name}}
    </div>

    <div class="form-group">
        <label for="collections_private" data-toggle="tooltip" data-placement="right"
               title="{{=form.custom.label.private}}">
        {{=form.custom.widget.private}}
            Private
        </label>
    </div>

    <div class="form-group clearfix">
        <a href="{{=URL('collections', 'show', args=collection.id)}}" class="btn btn-default pull-left" role="button">Cancel</a>
        <button type="submit" name="submit" value="save" class="btn btn-success pull-right">Save Collection</button>
    </div>

{{=form.custom.end}}
</div>