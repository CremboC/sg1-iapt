{{breadcrumbs = [[URL('default', 'index'), 'Home'], [URL('collections', 'index'), 'My collections'], ['New collection']]}}

{{extend 'layout.html'}}
<script>
    // Adds accessibility features to widgets generated by web2py
    $(document).ready(function(){
        var input = $("#collections_name");
        input.prop('required',true);
        input.attr('placeholder', 'Collection\'s name');
    });
</script>
<div class="container">
    <div class="panel panel-default">
        <header class="panel-heading">
            <h3 class="panel-title">Create new collection</h3>
        </header>
        <div class="panel-body">
        {{=form.custom.begin}}
            <em class="text-info">
                Fields marked with an asterisk (*) are mandatory.
            </em>

            <div class="form-group">
                <label for="collections_name" class="mandatory">
                {{=form.custom.label.name}}
                </label>
                <!-- See js script at top of page for accessibility implementation-->
                {{=form.custom.widget.name}}
            </div>

            <div class="form-group">
                <label for="collections_private" data-toggle="tooltip" data-placement="right" title="{{=form.custom.label.private}}">
                {{=form.custom.widget.private}}
                Private
                </label>
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-success">
                    Create Collection
                </button>
            </div>
        {{=form.custom.end}}
        </div>
    </div>
</div>

<script>
    var changesMade = false;
    $( function() {
        $("#collections_name").change( function() { changesMade = true } )
        $("#collections_private").change( function() { changesMade = true } )
    } );
    $( function() {
        $("button[type=submit]" ).click( function() { changesMade = false } )
    } );
    window.onbeforeunload = function() {
        if ( changesMade )
            return "Are you sure you want to leave this page? All progress will be lost.";
    }
</script>
