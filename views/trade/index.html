{{extend 'layout.html'}}

<div class="container">

    <div style='text-align: center; clear:both; padding-bottom: 20px; padding-left: 20%; padding-right: 20%'><p>Trade is editable {{=editable}} </p>
        <form class="form-inline" action="">
            <label for='trader_username'>Select User: &nbsp;</label><input class="form-control" name='trader_username' type='search' value="{{=(trader_username if trader_username is not None else '')}}">
            <input type='submit' value='Submit'>
        </form>
    </div>
    <!-- TODO: create search features for multi-selects -->
    <!-- TODO: disable items for completed trade -->
    <div style="clear:both">
        <div class="col-md-6" style="border-right: 1px solid #393a35;">
            <div class="panel panel-default">

                <div class="panel-heading">
                    <h2 class="panel-title">You have</h2>
                </div>

                <div class="panel-body">

                    <div id="searchItems" class="form-inline">
                        <input type="text" class="form-control" id="searchOwnItems" placeholder="Search your items">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>

                    <select id="ownAvailableObjects" multiple size="5" class="form-control">
                    {{for row in available_objects[0]:}}
                        <option value="{{=row.id}}">{{=row.name}}</option>
                    {{pass}}
                    </select>

                    <div style="float:right">
                        <button type="submit" class="btn btn-default" onclick="transferOptions($('#ownAvailableObjects'), $('#ownTradeObjects'))">Add item</button>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">

                <div class="panel-heading">
                    <h2 class="panel-title">You give</h2>
                </div>

                <div class="panel-body">
                    <div id="searchItems" class="form-inline">
                        <input type="text" class="form-control" id="searchOwnItems" placeholder="Search your items">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>

                    <select id="ownTradeObjects" multiple size="5" class="form-control">
                    {{for row in trade_objects[0]:}}
                        <option value="{{=row.id}}">{{=row.name}}</option>
                    {{pass}}
                    </select>
                    <div style="float:right">
                        <button type="submit" class="btn btn-default" onclick="transferOptions($('#ownTradeObjects'), $('#ownAvailableObjects'))">Add item</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="panel panel-default">

                <div class="panel-heading">
                    <h2 class="panel-title">He has</h2>
                </div>

                <div class="panel-body">

                    <div id="searchItems" class="form-inline">
                        <input type="text" class="form-control" id="searchOwnItems" placeholder="Search their items">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>

                    <select id="theirAvailableObjects" multiple size="5" class="form-control">
                        {{for row in available_objects[1]:}}
                            <option value="{{=row.id}}">{{=row.name}}</option>
                        {{pass}}
                    </select>
                    <div style="float:right">
                        <button type="submit" class="btn btn-default" onclick="transferOptions($('#theirAvailableObjects'), $('#theirTradeObjects'))">Add item</button>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">

                <div class="panel-heading">
                    <h2 class="panel-title">He gives</h2>
                </div>

                <div class="panel-body">

                    <div id="searchItems" class="form-inline">
                        <input type="text" class="form-control" id="searchOwnItems" placeholder="Search their items">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>

                    <select id="theirTradeObjects" multiple size="5" class="form-control">
                    {{for row in trade_objects[1]:}}
                        <option value="{{=row.id}}">{{=row.name}}</option>
                    {{pass}}
                    </select>
                    <div style="float:right">
                        <button type="submit" class="btn btn-default" onclick="transferOptions($('#theirTradeObjects'), $('#theirAvailableObjects'))">Add item</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div style='clear:both'>
        <div style="float:left">
            <a type="submit" name="filtered" class="btn btn-danger" href="{{=URL('trade', 'home')}}">Cancel</a>
        </div>
        <div style="float:right">
            <button type="submit" name="filtered" class="btn btn-success" onclick="submitproposal('{{=user_id}}', '{{=trader_id}}', $('#ownTradeObjects'), $('#theirTradeObjects'))">Send trade proposal</button>
        </div>
    </div>
    <div style='clear:both'>
    {{=available_objects[0]}}
    {{ = (available_objects[1] if trader_username is not ''  else '')}}
    </div>
</div>
<!--
<div style='clear:both'>
    <div style='float:left'>

            Available Items:
        </p>

    </div>
    <div style='float:right'>
        <p>User: {{=trader_username}}</p>
        <p>
            Available Items:
        </p>
    </div>
</div>

<div style='clear:both'>
    <div style='float:left'>
            Trade Items:
        </p>
    </div>
    <div style='float:right'>
        <p>
            Trade items
        </p>
    </div>
</div>
-->